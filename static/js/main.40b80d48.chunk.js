(this["webpackJsonpreact-epic"]=this["webpackJsonpreact-epic"]||[]).push([[3],{119:function(e,t,n){e.exports=n(159)},124:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(8),a=n.n(o),c=n(15),u=(n(124),n(90)),s=n.n(u),l=n(28),p=n(3),f=n(16),b=n(160),m=n(65),y=n(68);function h(){var e=Object(c.a)(["\nfont-family:Impact, fantasy;\nfont-size:26px;    \n"]);return h=function(){return e},e}function g(){var e=Object(c.a)(["\nmargin-left:10px;\n"]);return g=function(){return e},e}function O(){var e=Object(c.a)(["\n"]);return O=function(){return e},e}function j(){var e=Object(c.a)(["\ncolor:#fff;\nmargin-left:20px;\n&.active{\nborder-bottom:1px solid #fff;\n}\n"]);return j=function(){return e},e}function v(){var e=Object(c.a)(["\nheight:30px;\n"]);return v=function(){return e},e}function d(){var e=Object(c.a)(["\nbackground:transparent;\ndisplay:flex;\nalign-items:center;\njustify-content:space-between;\npadding:10px 10px;\n"]);return d=function(){return e},e}var w=f.a.header(d()),U=f.a.img(v()),P=Object(f.a)(l.b)(j()),k=f.a.div(O()),E=Object(f.a)(b.a)(g()),z=f.a.span(h()),L=Object(y.a)((function(){var e=Object(p.f)(),t=Object(m.a)(),n=t.UserStore,r=t.AuthStore;return i.a.createElement(w,null,i.a.createElement("nav",null,i.a.createElement(U,{src:s.a,alt:""}),i.a.createElement(P,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),i.a.createElement(P,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2")),i.a.createElement(z,null,"Afeng-epic\u56fe\u5e8a"),i.a.createElement(k,null,n.currentUser?i.a.createElement(i.a.Fragment,null,n.currentUser.attributes.username," ",i.a.createElement(E,{type:"primary",onClick:function(){r.logout()}},"\u6ce8\u9500")):i.a.createElement(i.a.Fragment,null,i.a.createElement(E,{type:"primary",onClick:function(){e.push("/login")}},"\u767b\u5f55"),i.a.createElement(E,{type:"primary",onClick:function(){e.push("/register")}},"\u6ce8\u518c\u8d26\u6237"))))}));var D=function(){return i.a.createElement("div",null,"loading")};n(158);function x(){var e=Object(c.a)(["\nbackground-image: url(https://sbimg.cn/content/images/system/default/home_cover.jpg);\n    background-color: white;\n    min-width:100%;\n    min-height:100vh;\n"]);return x=function(){return e},e}var F=f.a.div(x()),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(8),n.e(10)]).then(n.bind(null,384))})),C=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9)]).then(n.bind(null,385))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6),n.e(11)]).then(n.bind(null,376))})),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,377))}));var B=function(){return i.a.createElement(F,null,i.a.createElement(L,null),i.a.createElement("main",null,i.a.createElement(r.Suspense,{fallback:D()},i.a.createElement(p.c,null,i.a.createElement(p.a,{path:"/",exact:!0,component:I}),i.a.createElement(p.a,{path:"/history",component:C}),i.a.createElement(p.a,{path:"/login",component:S}),i.a.createElement(p.a,{path:"/register",component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(l.a,null,i.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),i=n(7),o=n(18),a=n(19),c=n(2),u=(n(41),n(1)),s=n(13),l=n.n(s);l.a.init({appId:"BfuEKENChBLAAITbXBHnWNMl-gzGzoHsz",appKey:"btJpgwXzOg4KrHIa4L45y4Qa",serverURL:"https://bfuekenc.lc-cn-n1-shared.com"});var p,f,b,m,y,h,g,O,j,v,d,w,U,P,k,E,z=function(e,t){var n=new s.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},L=function(e,t){return console.log("------"),console.log(e,t),new Promise((function(n,r){s.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},D=function(){s.User.logOut()},x=function(){return s.User.current()},F=function(e,t){var n=new l.a.Object("Image"),r=new l.a.File(t,e);return n.set("filename",t),n.set("owner",l.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},I=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new l.a.Query("Image");return o.include("owner"),o.limit(i),o.skip(i*n),o.descending("createAt"),o.equalTo("owner",l.a.User.current()),new Promise((function(e,t){o.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},C=new(p=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",f,this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=x()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(p.prototype,"currentUser",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(p.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),S=n(161),A=new(b=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",m,this),Object(i.a)(this,"isLoading",y,this),Object(i.a)(this,"hasMore",h,this),Object(i.a)(this,"page",g,this),this.limit=10}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,I({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(){S.a.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),m=Object(c.a)(b.prototype,"list",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=Object(c.a)(b.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(c.a)(b.prototype,"hasMore",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=Object(c.a)(b.prototype,"page",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(b.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"append"),b.prototype),Object(c.a)(b.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"find"),b.prototype),Object(c.a)(b.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"reset"),b.prototype),b),B=new(O=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",j,this),Object(i.a)(this,"file",v,this),Object(i.a)(this,"isUploading",d,this),Object(i.a)(this,"serverFile",w,this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){F(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),j=Object(c.a)(O.prototype,"filename",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(c.a)(O.prototype,"file",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Object(c.a)(O.prototype,"isUploading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(c.a)(O.prototype,"serverFile",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(O.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"setFilename"),O.prototype),Object(c.a)(O.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"setFile"),O.prototype),Object(c.a)(O.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"upload"),O.prototype),Object(c.a)(O.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"reset"),O.prototype),O),M=new(U=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"isLogin",P,this),Object(i.a)(this,"isLoading",k,this),Object(i.a)(this,"values",E,this)}return Object(a.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){L(e.values.username,e.values.password).then((function(e){C.pullUser(),t(e)})).catch((function(e){n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){z(e.values.username,e.values.password).then((function(e){C.pullUser(),t(e)})).catch((function(e){C.resetUser(),n(e)}))}))}},{key:"logout",value:function(){D(),C.resetUser(),A.reset(),B.reset()}}]),e}(),P=Object(c.a)(U.prototype,"isLogin",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=Object(c.a)(U.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=Object(c.a)(U.prototype,"values",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(U.prototype,"setIsLogin",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setIsLogin"),U.prototype),Object(c.a)(U.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setUsername"),U.prototype),Object(c.a)(U.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setPassword"),U.prototype),Object(c.a)(U.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"login"),U.prototype),Object(c.a)(U.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"register"),U.prototype),Object(c.a)(U.prototype,"logout",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"logout"),U.prototype),U),H=Object(r.createContext)({AuthStore:M,UserStore:C,ImageStore:B,HistoryStore:A}),N=function(){return Object(r.useContext)(H)}},90:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"}},[[119,4,5]]]);
//# sourceMappingURL=main.40b80d48.chunk.js.map